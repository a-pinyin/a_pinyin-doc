# 核心模块多线程并行运行设计

多线程设计: 不同的核心模块运行在多个线程上.

理想的线程数量: `4` (对应手机处理器的 4 个 CPU 小核心)

下列组件可以运行在单独的线程上:

- `a_pinyin-server` 后端接口模块

- `a_pinyin-db` 数据库层

- `sqlite` 数据库执行 (sqlite)

- `c1` c1 核心模块

- `c1_hmm` c1 核心的 HMM 查询部分 (单独线程)

这些模块都是异步 IO 处理的 (async)

通过性能测试, 将计算量不大的多个模块合并放在一个线程上,
实现总线程数量约为 4 的目标.

## 并行设计

比如 `c1_hmm` 可在多个线程上运行多个实例, 用于并行处理多个请求 (可能降低查询延迟)

TODO
